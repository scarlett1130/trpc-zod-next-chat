(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4108)}])},4108:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var n=s(7568),r=s(797),a=s(655),i=s(5893),l=s(7294),o=s(9008),d=s.n(o),c=s(7632),u=s(503),x=function(){return(0,i.jsxs)("svg",{id:"wave",style:{transform:"rotate(0deg)",transition:"0.3s"},className:"absolute bottom-0 w-250 sm:w-220 lg:w-160 xl:w-140 -z-50",viewBox:"0 0 1440 490",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"sw-gradient-0",x1:"0",x2:"0",y1:"1",y2:"0",children:[(0,i.jsx)("stop",{stopColor:"rgba(243, 106, 62, 1)",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"rgba(255, 179, 11, 1)",offset:"100%"})]})}),(0,i.jsx)("path",{style:{transform:"translate(0, 0px)",opacity:"1"},fill:"url(#sw-gradient-0)",d:"M0,98L80,81.7C160,65,320,33,480,89.8C640,147,800,294,960,310.3C1120,327,1280,212,1440,204.2C1600,196,1760,294,1920,343C2080,392,2240,392,2400,367.5C2560,343,2720,294,2880,245C3040,196,3200,147,3360,155.2C3520,163,3680,229,3840,220.5C4000,212,4160,131,4320,155.2C4480,180,4640,310,4800,367.5C4960,425,5120,408,5280,334.8C5440,261,5600,131,5760,138.8C5920,147,6080,294,6240,334.8C6400,376,6560,310,6720,261.3C6880,212,7040,180,7200,204.2C7360,229,7520,310,7680,318.5C7840,327,8000,261,8160,196C8320,131,8480,65,8640,49C8800,33,8960,65,9120,98C9280,131,9440,163,9600,147C9760,131,9920,65,10080,98C10240,131,10400,261,10560,302.2C10720,343,10880,294,11040,285.8C11200,278,11360,310,11440,326.7L11520,343L11520,490L11440,490C11360,490,11200,490,11040,490C10880,490,10720,490,10560,490C10400,490,10240,490,10080,490C9920,490,9760,490,9600,490C9440,490,9280,490,9120,490C8960,490,8800,490,8640,490C8480,490,8320,490,8160,490C8000,490,7840,490,7680,490C7520,490,7360,490,7200,490C7040,490,6880,490,6720,490C6560,490,6400,490,6240,490C6080,490,5920,490,5760,490C5600,490,5440,490,5280,490C5120,490,4960,490,4800,490C4640,490,4480,490,4320,490C4160,490,4000,490,3840,490C3680,490,3520,490,3360,490C3200,490,3040,490,2880,490C2720,490,2560,490,2400,490C2240,490,2080,490,1920,490C1760,490,1600,490,1440,490C1280,490,1120,490,960,490C800,490,640,490,480,490C320,490,160,490,80,490L0,490Z"})]})},f=function(e){var t=e.children;return(0,i.jsx)("div",{className:"h-70 shadow-xl rounded-lg overflow-hidden bg-white w-10/12 sm:w-4/6 md:w-4/6 lg:w-1/2 xl:w-1/3 -z-50 border-2 flex flex-col",children:t})},m=function(e){var t=e.value,s=e.onChange,n=e.onSendMsg,r=e.isSending;return(0,i.jsxs)("form",{className:"p-3 flex",onSubmit:n,children:[(0,i.jsx)("input",{value:t,onChange:s,type:"text",className:"cursor-text rounded p-2 flex-1 border-2 focus:outline-none",placeholder:"Type..."}),(0,i.jsx)("button",{disabled:r,type:"submit",className:"ml-2 rounded bg-black px-4 p-2 bg-gradient-to-r from-primary to-secondary text-white",children:r?"...":"Send"})]})},v=s(9252),h=s(1795);v.Z.addDefaultLocale(h.Z);var g=new v.Z("en-US");function C(){return g}var j=function(e){var t=e.date,s=e.text,n=e.creator,r=localStorage.getItem("user-id"),a=C();return(0,i.jsxs)("div",{className:"flex flex-col ".concat(r===n&&"items-end text-end"),children:[(0,i.jsx)("h1",{className:"w-45 break-words mb-3 p-2 bg-gradient-to-r from-primary to-secondary text-white rounded",children:s}),(0,i.jsx)("p",{className:"text-xs text-[#777] w-45 break-words",children:a.format(new Date(t))})]})},p=s(5820),w=s(5331),b=function(e){var t=e.msgs,s=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(s.current){var e=s.current.scrollHeight-s.current.clientHeight;s.current.scrollTo(0,e)}}),[t]),(0,i.jsxs)("div",{className:"overflow-y-auto overflow-x-hidden p-4 h-[63vh] chatbox-container flex flex-col",ref:s,children:[(0,i.jsx)("div",{className:"ghost-element"}),(0,i.jsx)(p.M,{initial:!1,children:t.map((function(e){return(0,i.jsx)(w.E.div,{className:"mb-5 last:mb-0",initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,transition:{duration:.15}},children:(0,i.jsx)(j,{text:e.text,date:e.createdAt.toString(),creator:e.creator},e._id)},e._id)}))})]})},N=function(){return(0,i.jsxs)("div",{className:"fixed top-0 left-0 w-full h-screen flex justify-center items-center z-[2000]",children:[(0,i.jsx)("div",{className:"fixed top-0 left-0 w-full h-screen bg-backdrop"}),(0,i.jsxs)("div",{className:"loading-modal-spinner",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})]})},y=function(e){var t=e.message,s=e.closeAlert;return(0,i.jsxs)("div",{className:"fixed top-0 left-0 w-full h-screen flex justify-center items-center z-[3000]",children:[(0,i.jsx)("div",{className:"fixed top-0 left-0 w-full h-screen bg-backdrop"}),(0,i.jsxs)("div",{className:"z-[4000] flex flex-col",children:[(0,i.jsxs)("div",{className:"w-full bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mr-4",role:"alert",children:[(0,i.jsx)("strong",{className:"font-bold",children:"Alert!"}),(0,i.jsxs)("span",{className:"block sm:inline",children:[" ",t]}),(0,i.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),(0,i.jsx)("button",{className:"mt-6 self-center rounded bg-black px-4 p-2 bg-gradient-to-r from-primary to-secondary text-white",onClick:s,children:"Close"})]})]})},S=function(){var e=(0,l.useState)(""),t=e[0],s=e[1],o=(0,l.useState)(""),v=o[0],h=o[1],g=(0,l.useState)(""),C=g[0],j=g[1],p=u.S.msg.list.useQuery(),w=u.S.useContext(),S=u.S.msg.add.useMutation({onMutate:(0,n.Z)((function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,w.msg.list.cancel()];case 1:return t.sent(),[2,{previousMessages:null!==(e=p.data)&&void 0!==e?e:[]}]}}))})),onError:function(e,t,s){var n,a=null!==(n=null===s||void 0===s?void 0:s.previousMessages)&&void 0!==n?n:[];w.msg.list.setData((0,r.Z)(a)),j(e.message)},onSettled:(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,w.msg.list.invalidate()];case 1:return e.sent(),h(""),[2]}}))}))});return(0,l.useEffect)((function(){var e,t=null!==(e=localStorage.getItem("user-id"))&&void 0!==e?e:"";t||(t=(0,c.Z)(),localStorage.setItem("user-id",t)),s(t)}),[]),(0,i.jsxs)("div",{className:"overflow-hidden",children:[p.isLoading&&(0,i.jsx)(N,{}),C&&(0,i.jsx)(y,{message:C,closeAlert:function(){return j("")}}),(0,i.jsx)(d(),{children:(0,i.jsx)("title",{children:"Chat | Homepage"})}),(0,i.jsxs)("div",{className:"w-full h-screen relative overflow-hidden flex items-center z-10 justify-center",children:[(0,i.jsx)(x,{}),(0,i.jsxs)(f,{children:[(0,i.jsx)(b,{msgs:p.data?p.data:[]}),(0,i.jsx)(m,{value:v,onChange:function(e){h(e.target.value)},onSendMsg:function(e){e.preventDefault(),0!==v.trim().length?S.mutate({text:v,createdAt:new Date,creator:t}):j("Empty messages cannot be send.")},isSending:S.isLoading})]})]})]})}}},function(e){e.O(0,[380,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);